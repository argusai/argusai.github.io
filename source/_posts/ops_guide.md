---
layout: post
title:  雅果运维手册
date:   2020-08-09 15:17
categories:
  - 手册
---

本文主要关于雅果前端控制系统的使用说明.

# 名词解释
| 名词 | 解释 | 备注 |
| :---: | --- | --- |
| 前端控制系统 | 智能控制单元板发光的系统 | |
| 工控机/树莓派 | 部署前端控制系统的设备 |  |
| 单元板 | 安装在斑马线两边的发光板 |  |
| 灯带 | 最小的发光设备 | 一块单元板有2/3/4条灯带 |
| 芯片 | 单元板上所有灯带的控制单元 | 每块芯片占用一个地址码 |
| 地址码 | 芯片烧录时指定的十六进制编号 | 一条斑马线左右各占用一个地址码 |
| 缺省值 | 配置参数不做修改时控制系统使用的默认值 | 与针脚相关的缺省值都是针脚编号 |
| 针脚 | 树莓派上与外界交互的硬件单元 | 每个针脚都有相应的编号(详见附录) |

# 统一约定
## 参数
| 名称  | 缺省值  | 备注 |
| --- | --- | --- |
| 手机热点用户名 |argusai  |  |
| 手机热点密码 |12345678  |远程软件密码/系统登陆密码 |
| 主雷达IP |192.168.0.10  | （激光）雷达默认出厂IP  |
| 副雷达IP |192.168.0.11  | |
| 主机IP |192.168.0.1  | （激光）雷达所在主机IP |
| 输入针脚2 | 15 | 红外线感应、温度计接入 |
| 输入针脚1 | 16 | 红绿灯信号、照度计接入 |
| 雷达针脚 | 18 | 控制雷达供电 |
| 输出针脚1 | 19 | 控制带芯片单元板供电，控制`亮灯模式2` |
| 输出针脚2 | 21 | 与输出针脚1搭配控制`亮灯模式3` |

## 其它
1. 选择靠近控制箱的雷达作为主雷达;
2. 面对`倒装的`雷达，X值前负后正，Y值左正右负，地址码左大右小；
3. 靠近(主)雷达一边地址码为单数，反之双数；

# 前端控制系统
本节中提到的系统如无明确提示的话，均指前端控制系统。

## 快速入门
* 首次使用
    1. 控制器接上鼠标、键盘、显示屏，显示屏电源线；
    2. 接通电源后可以看到自动运行的系统；
    3. 按"CTRL+C"暂时关闭此系统，单击桌面上的“argusai”文件配置系统参数：包括雷达扫描范围，亮灯模式等，完成后单击“保存”；
    4. 单击左边中部红色雅果图标重新启动系统。
* 正常使用：控制器接通电源后系统自动运行；

## 参数说明

| 名称 | 参数名 | 取值范围 | 缺省值 | 备注 |
| --- | --- | :---: | :---: | :---: |
|斑马线距离雷达的最小x值| `fobid_x_min` |0 ~ 25.0  | 0 |
|斑马线距离雷达的最大x值| `fobid_x_max` |0 ~ 25.0  | 5 |
|斑马线距离雷达的最小y值| `fobid_y_min` |-50.0 ~ 50.0  | -5 |
|斑马线距离雷达的最大y值| `fobid_y_max` |-50.0 ~ 50.0  | 5 |
|斑马线宽度  | `zebra_width` | >0 | 1.0 | |
|斑马线前后跟随条数 | `step` | >=0 | 0 | |
|亮灯模式|`light_type`|0 ~ 10|0|详见`亮灯模式`章节|
|是否频闪|`is_blink`|true/false|true| true:频闪/false:不频闪，专用于`亮灯模式2`|
|数据发送间隔 |output_interval_seconds| 0 ~ 1 | 0.0 | | |
|数据发送次数 |send_count| 1 ~ 5 |1|通过重发降低发送失败概率| |
|雷达类型 |laser_type | wr/sick | wr |wr:机智人雷达/sick:西克雷达|
|雷达精度 | laser_is_standard | true/false | true | true:标精度/false: 高精|
|副雷达相对主雷达的x值|`slave_x`| -50.0 ~ 50.0 | 0
|副雷达相对主雷达的y值|`slave_y`| -50.0 ~ 50.0 | 0
|副雷达类型|slave_laser_type| |wr| 同上 |
|副雷达精度|slave_laser_is_standard|| true | 同上 |
**注**:
1. 参数名中有`红色`字样的部分为经常需要修改的参数；

## 亮灯模式
| 模式值 | 输入 | 输出 | 效果 | 备注 | 相关参数 |
| :---: | :---: | :---: | :---: | :-- | :--: |
| 0 | 雷达 | 串口 | 有人时跟随亮 | 雷达检测有人时走串口跟随亮| |
| 1 | 雷达 | 串口 | 有人时全亮 | 雷达检测有人时走串口全亮 | |
| 2 | 雷达 | 针脚 | 有人时全亮 | 雷达检测有人时走针脚全亮 | is_blink |
| 3 | 雷达 | 针脚 | 有人时所在半边车道亮 | 雷达检测有人时走针脚所在半边车道亮 |  |
| 4 | 针脚 | 串口 | 输入低电平时全亮 | 针脚低电平时走串口全亮 | |
| 5 | 针脚 | 针脚 | 输入低电平时全亮 | 针脚低电平时走(另一)针脚全亮 | |
